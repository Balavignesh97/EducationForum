@{
    ViewData["Title"] = "Contact";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Include jQuery Validation Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>

    <style>

        .hide {
            display: none !important;
        }

        .show {
            display: block;
        }

        .error {
            border-color: red !important;
        }

        .noneerror {
            border-color: green !important;
        }
    </style>
</head>

<section class="page-header">
    <div class="bg-item">
        <div class="bg-img" data-background="../assets/img/bg-img/1300x308bg-img.jpg"></div>
        <div class="overlay"></div>
        <div class="shapes">
            <div class="shape shape-1"><img src="~/assets/img/shapes/page-header-shape-1.png" alt="shape" loading="lazy"></div>
            <div class="shape shape-2"><img src="~/assets/img/shapes/page-header-shape-2.png" alt="shape" loading="lazy"></div>
            <div class="shape shape-3"><img src="~/assets/img/shapes/page-header-shape-3.png" alt="shape" loading="lazy"></div>
        </div>
    </div>
    <div class="container">
        <div class="page-header-content">
            <h1 class="title">Contact Us</h1>
            <h4 class="sub-title"><a class="home" asp-controller="Home" asp-action="Index">Home </a><span class="icon">/</span><a class="inner-page" asp-controller="Home" asp-action="Contact"> Contact Us</a></h4>
        </div>
    </div>
</section>
<!-- ./ page-header -->

<section class="contact-section pt-120 pb-120">
    <div class="container">
        <div class="row gy-lg-0 gy-5">
            <div class="col-lg-7">
                <div class="blog-contact-form contact-form">
                    <h2 class="title mb-0">Leave A Reply</h2>
                    <p class="mb-30 mt-10">Fill-up The Form and Message us of your amazing question</p>
                    <div class="request-form">
                        <form method="post" id="from_contact" class="form-horizontal">
                            <div class="form-group row">
                                <div class="col-md-6">
                                    <div class="form-item">
                                        <input type="text" id="fullname" name="fullname" class="form-control" placeholder="Your Name">
                                        <div class="icon"><i class="fa-regular fa-user"></i></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-item">
                                        <input type="email" id="email" name="email" class="form-control" placeholder="Your Email">
                                        <div class="icon"><i class="fa-sharp fa-regular fa-envelope"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-md-6">
                                    <div class="form-item">
                                        <input type="text" id="Mobile" name="Mobile" class="form-control" placeholder="Your Mobile Number">
                                        <div class="icon"><i class="fa-solid fa-mobile-screen-button"></i></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <input type="hidden" name="Class" id="Class" />
                                    <div class="form-item">
                                        <div class="nice-select select-control form-control country Class" tabindex="0" name="Classdiv" required>
                                            <span class="current">Select Class</span>
                                            <ul class="list">
                                                <li data-value="" class="option selected focus">Select Class</li>
                                                @foreach (var grade in @ViewBag.grade as SelectList)
                                                {
                                                    <li data-value="@grade.Value" class="option">@grade.Text</li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <input type="hidden" name="subject" id="subject" />
                                <input type="hidden" name="choiceofclass" id="choiceofclass" />
                                <div class="col-md-6">
                                    <div class="form-item">
                                        @* <div class="nice-select select-control form-control country subject" tabindex="0"><span class="current" name="current">Select Subject</span><ul class="list"><li data-value="" class="option selected focus">Select Subject</li><li data-value="vdt" class="option">Plan One</li><li data-value="can" class="option">Plan Two</li><li data-value="uk" class="option">Plan Three</li></ul></div> *@
                                        <div class="nice-select select-control form-control country subject" tabindex="0">
                                            <span class="current" name="current">Select Subject</span>
                                            <ul class="list">
                                                <li data-value="" class="option selected focus">Select Subject</li>
                                                @foreach (var subject in @ViewBag.subject as SelectList)
                                                {
                                                    <li data-value="@subject.Value" class="option">@subject.Text</li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-item">
                                        <div class="nice-select select-control form-control country choiceofclass" tabindex="0">
                                            <span class="current">Choice Of Class</span>
                                            <ul class="list">
                                                <li data-value="" class="option selected focus">Choice Of Class</li>
                                                @foreach (var classtype in @ViewBag.classtype as SelectList)
                                                {
                                                    <li data-value="@classtype.Value" class="option">@classtype.Text</li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-md-12">
                                    <div class="form-item message-item">
                                        <textarea id="message" name="message" cols="30" rows="5" class="form-control address" placeholder="Message"></textarea>
                                        <div class="icon"><i class="fa-light fa-messages"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="submit-btn">
                                <button id="contactsubmit" class="ed-primary-btn" type="submit">Submit Message</button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-12">
                <div class="contact-content">
                    <div class="contact-top">
                        <h3 class="title">Institute Information</h3>
                        @* <p>Completely recapitalize 24/7 communities via standards compliant metrics whereas.</p> *@
                    </div>
                    <div class="contact-list">
                        <div class="list-item">
                            <div class="icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="content">
                                <h4 class="title">Whatsapp Number & Email</h4>
                                <span><a href="https://wa.me/918122097882">+91 812 209 7882</a></span>
                                <span>
                                    <a href="mailto:princetonlearnersforum@gmail.com">
                                        princetonlearnersforum@gmail.com
                                    </a>
                                </span>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="icon">
                                <i class="fa-sharp fa-solid fa-location-dot"></i>
                            </div>
                            <div class="content">
                                <h4 class="title"> Address</h4>
                                <p>
                                    Millerpuram, Thoothukudi - 628008
                                    <br>Tamil Nadu, India
                                </p>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="icon">
                                <i class="fa-sharp fa-solid fa-clock"></i>
                            </div>
                            <div class="content">
                                <h4 class="title">Work Time</h4>
                                <span>Monday - Saturday: 10:00 AM - 05:00 PM</span>
                                @* <span>Sunday & Saturday: 10:30 - 22:00</span> *@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ./ contact-section -->


<script>
    document.addEventListener('DOMContentLoaded', function () {

        document.querySelector('.subject').addEventListener('click', function (event) {
            if (event.target && event.target.classList.contains('option')) {
                const options = document.querySelectorAll('.subject .option');
                options.forEach(option => option.classList.remove('selected', 'focus'));
                event.target.classList.add('selected', 'focus');

                const selectedValue = event.target.getAttribute('data-value');
                $('#subject').val(selectedValue);
                Validatecheck();
            }
        });

        document.querySelector('.choiceofclass').addEventListener('click', function (event) {
            if (event.target && event.target.classList.contains('option')) {
                const options = document.querySelectorAll('.choiceofclass .option');
                options.forEach(option => option.classList.remove('selected', 'focus'));
                event.target.classList.add('selected', 'focus');

                const selectedValue = event.target.getAttribute('data-value');
                $('#choiceofclass').val(selectedValue);
                Validatecheck();
            }
        });

        document.querySelector('.Class').addEventListener('click', function (event) {
            if (event.target && event.target.classList.contains('option')) {
                const options = document.querySelectorAll('.Class .option');
                options.forEach(option => option.classList.remove('selected', 'focus'));
                event.target.classList.add('selected', 'focus');

                const selectedValue = event.target.getAttribute('data-value');
                $('#Class').val(selectedValue);
                Validatecheck();
            }
        });
    });


    $('#contactsubmit').click(async function (event) {
        var validStatus = await Validatecheck();
        if (validStatus) {
            var datastring = $(this).closest('form').serialize();
            var url = '/Home/GetContact';

            Callservice(datastring, url);
        }
        else{
            event.preventDefault();
        }
    });

    $('#fullname, #email, #Mobile, #message').on('input', function () {
        Validatecheck();
    });

    async function Validatecheck() {
        var fullname = $('#fullname');
        var email = $('#email');
        var Mobile = $('#Mobile');
        var Class = $('#Class').val();
        var subject = $('#subject').val();
        var choiceofclass = $('#choiceofclass').val();
        var Class1 = $('.Class');
        var subject1 = $('.subject');
        var choiceofclass1 = $('.choiceofclass');
        var message = $('#message');

        var isValidEmail = validateEmail(email.val());
        var isValidPhone = validatePhone(Mobile.val());

        fullname.toggleClass('error', !fullname.val());
        email.toggleClass('error', !isValidEmail);
        Mobile.toggleClass('error', !isValidPhone);
        message.toggleClass('error', !message.val());
        Class1.toggleClass('error', !Class);
        subject1.toggleClass('error', !subject);
        choiceofclass1.toggleClass('error', !choiceofclass);

        fullname.toggleClass('noneerror', !!fullname.val());
        email.toggleClass('noneerror', isValidEmail);
        Mobile.toggleClass('noneerror', isValidPhone);
        message.toggleClass('noneerror', !!message.val());
        Class1.toggleClass('noneerror', !!Class);
        subject1.toggleClass('noneerror', !!subject);
        choiceofclass1.toggleClass('noneerror', !!choiceofclass);


        return fullname.val() && isValidEmail && isValidPhone && message.val() && Class && subject && choiceofclass;
    }

    function validateEmail(email) {
        var emailPattern = /^[a-zA-Z0-9._-]+@@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return emailPattern.test(email);
    }

    function validatePhone(phone) {
        var phonePattern = /^[6-9]{1}[0-9]{9}$/;
        return phonePattern.test(phone);
    }

</script>
